<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">


    <title>Doctrado - тест</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/css/materialize.min.css"  media="screen,projection"/>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width = 1050, user-scalable = no"/>
</head>
<body>




<script type="text/javascript" src="js/turnjs/extras/jquery.min.1.7.js"></script>
<script type="text/javascript" src="js/turnjs/extras/modernizr.2.5.3.min.js"></script>
<script type="text/javascript" src="js/turnjs/extras/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript" src="js/turnjs/lib/turn.html4.js"></script>
<script type="text/javascript" src="js/turnjs/lib/turn.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.2/js/materialize.min.js"></script>
<script type="text/javascript" src="js/authorizator.js"></script>



<nav class="orange darken-1">
    <div class="nav-wrapper" id="nav">
        <a href="index.html" class="brand-logo">Doctrado</a>
        <ul class="right hide-on-med-and-down">
            <li><a href="about.html">О проекте</a></li>
            <li><a href="certificates.html">Сертификаты</a></li>
            <li><a href="about.html">Курсы</a></li>
            <li><a href="about.html">Контакты</a></li>
            <li><a href="#" class="btn green darken-1" >Вход</a></li>

        </ul>
    </div>
</nav>


<script src="js/pdfjs/build/pdf.js"></script>
<script src="js/basic.js"></script>


<h1>PDF.js Previous/Next example</h1>

<div class="hide">
    <button id="prev">Previous</button>
    <button id="next">Next</button>
    &nbsp; &nbsp;
    <span>Page: <span id="page_num"></span> / <span id="page_count"></span></span>
</div>

<div id = "container"></div>






<div class="flipbook-viewport">
    <div class="container">
        <div class="flipbook" id = "general_container">



        </div>
    </div>
</div>


<footer class="page-footer grey darken-3">
    <div class="container">
        <div class="row">
            <div class="col l6 s12">
                <h5 class="white-text">Doctrado</h5>
                <p class="grey-text text-lighten-4">Дистанционное обучение</p>
                <img src="img/logo_NDU.png">
                <p class="grey-text text-lighten-4">Сделано в НИУККЦПБ ©</p>
            </div>
            <div class="col l4 offset-l2 s12">
                <h5 class="white-text">Полезные ссылки</h5>
                <ul>
                    <li><a class="grey-text text-lighten-3" href="https://pbezpeka.herokuapp.com">Центр промышленной безопасности</a></li>
                    <li><a class="grey-text text-lighten-3" href="about.html">О проекте</a></li>
                    <li><a class="grey-text text-lighten-3" href="course.html">Курсы</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="footer-copyright grey darken-4">
        <div class="container center center-align">
            Doctrado © Все права защищены
        </div>
    </div>
</footer>



<script >


    $(document).ready(function () {


        var url = "/API/File?url=https://datadoctrado-sviasy.rhcloud.com/file?path=/var/lib/openshift/58cfc6e77628e17039000082/app-root/logs/upload/???????.pdf";
        renderPDF(url, document.getElementById('general_container'));


    });
    var allPages = 0;
    var currPage = 0;

    function renderPDF(url, canvasContainer, options) {
        var options = options || { scale: 1 };

     //   var bootFlags = [];


        function renderPage(page) {
            var viewport = page.getViewport(options.scale);
            var div = document.createElement('div');

            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');
            var renderContext = {
                canvasContext: ctx,
                viewport: viewport
            };





            canvas.height = viewport.height;
            canvas.width = viewport.width;
            div.appendChild(canvas);
            canvasContainer.appendChild(div);

            page.render(renderContext);

            console.log(currPage);
            console.log(allPages);




        }

        function renderPages(pdfDoc) {
            allPages = pdfDoc.numPages;
            for(var num = 1; num <= pdfDoc.numPages; num++){
                currPage = num;
                pdfDoc.getPage(num).then(renderPage);
            }


            $('.flipbook').turn({
                // Width

                width:922,

                // Height

                height:600,

                // Elevation

                elevation: 50,

                // Enable gradients

                gradients: true,

                // Auto center this flipbook

                autoCenter: true

            });


        }
        PDFJS.disableWorker = true;
        PDFJS.getDocument(url).then(renderPages);
    }

</script>

</body>
</html>